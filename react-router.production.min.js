import{createMemoryHistory as e,parsePath as t}from"history";import n from"react";function r(e,t){if(!e)throw Error(t)}let l=n.createContext(),a=n.createContext({outlet:null,params:{},pathname:"",route:null}),u=e=>e(),i=n.useTransition||(()=>[u,!1]);function o({children:e=null,history:t,timeout:a=2e3}){let[u,o]=n.useState(t.location),[c,s]=i({timeoutMs:a});return a=n.useRef(!1),n.useContext(l)&&r(!1),a.current||(a.current=!0,t.listen(({location:e})=>{c(()=>{o(e)})})),n.createElement(l.Provider,{children:e,value:{history:t,location:u,pending:s}})}function c(e){let t=[];return n.Children.forEach(e,e=>{if(n.isValidElement(e)){var{children:r,from:l,path:a,to:u}=e.props;if(e.type===n.Fragment)t.push.apply(t,c(r));else{if(a=a||l||"/",u)e={path:a,redirectTo:u};else{e={path:a,element:e};let t=c(r);t.length&&(e.children=t)}t.push(e)}}}),t}function s(){return n.useContext(l).location}function p(){let{history:e,pending:t}=n.useContext(l),{pathname:u}=n.useContext(a);return null==e&&r(!1),n.useCallback((n,{replace:r,state:l}={})=>{"number"==typeof n?e.go(n):(n=E(n,u),e[r||t?"replace":"push"](n,l))},[e,t,u])}function h(){return n.useContext(a).outlet}function f(e){let{pathname:t}=n.useContext(a);return n.useMemo(()=>E(e,t),[e,t])}function m(e,t="",r=!1){let{params:l,pathname:u}=n.useContext(a);t=t?[u,t].join("/").replace(/\/\/+/g,"/"):u;let i=p(),o=s();var c=n.useMemo(()=>g(e,o,t,r),[e,o,t,r]);if(!c)return null;var h=c.find(e=>null!=e.route.redirectTo);if(h){let{params:e,route:t}=h;return c=E(t.redirectTo,u),({pathname:h}=c),/:\w+/.test(h)&&(c={...c,pathname:R(h,e)}),i(c,{replace:!0}),null}return c.reduceRight((e,{params:r,pathname:u,route:i})=>n.createElement(a.Provider,{children:i.element,value:{outlet:e,params:{...l,...r},pathname:[t,u].join("/").replace(/\/\/+/g,"/"),route:i}}),null)}function g(e,n,r="",l=!1){"string"==typeof n&&(n=t(n)),r=r.replace(/^\/+|\/+$/g,"");let a=n.pathname.slice(1);if(r)if(r===a)a="";else{if(!a.startsWith(r))return null;a=a.slice(r.length).replace(/^\/+/,"")}for(function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(x)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(d.test(t)?2:""===t?1:10),t)}(t),e),{});e.sort((e,n)=>{let[r,,l]=e;e=t[r];let[a,,u]=n;return e!==(n=t[a])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,u)})}(e=function e(t,n=[],r="",l=[],a=[]){return t.forEach((t,u)=>{let i=[r,t.path].join("/").replace(/\/\/+/g,"/"),o=l.concat(t);u=a.concat(u),n.push([i,o,u]),t.children&&e(t.children,n,i,o,u)}),n}(e)),n=0;n<e.length;++n){let[t,u]=e[n];if([r]=C(t,!0,l),r.test(a))return u.map((e,t)=>{t=u.slice(0,t+1).map(e=>e.path).join("/").replace(/\/\/+/g,"/");let[n,r]=C(t,!1,l);return{params:y(r,(t=a.match(n)).slice(2)),pathname:"/"+t[1],route:e}})}return null}let d=/^:\w+$/,x=e=>"*"===e;function C(e,t,n){let r=[],l="^("+e.replace(/^\/+/,"").replace(/\*\//g,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):t&&(l+="\\/?"),t&&(l+="$"),[new RegExp(l,n?void 0:"i"),r]}function y(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}function v(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function E(e,n="/"){let{pathname:r,search:l="",hash:a=""}="string"==typeof e?t(e):e;return{pathname:r?r.startsWith("/")?v(r,"/"):v(r,n):n,search:l,hash:a}}function R(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>t[n]||`:${n}`).replace(/\*$/,e=>t[e]||e)}function $({children:t,initialEntries:r,initialIndex:l,timeout:a}){let u=n.useRef(null);return null==u.current&&(u.current=e({initialEntries:r,initialIndex:l})),n.createElement(o,{children:t,history:u.current,timeout:a})}function j({to:e,replace:t=!1,state:n}){return p()(e,{replace:t,state:n}),null}function w(){return h()}function M(){return null}function b({element:e}){return e}function T({basename:e="",caseSensitive:t=!1,children:n}){return m(n=c(n),e,t)}function W(e,t=!0){let{history:a}=n.useContext(l);null==a&&r(!1),n.useEffect(()=>{if(t){let t=a.block(n=>{e({...n,retry(){t(),n.retry()}})});return t}},[a,t,e])}function L(e){e=f(e);let{history:t}=n.useContext(l);return null==t&&r(!1),t.createHref(e)}function P(e){let t=s();return e=f(e),t.pathname===e.pathname}function k(){return n.useContext(a).params}function F(e,t="",r=!1){let{params:l,pathname:u}=n.useContext(a);t=t?[u,t].join("/").replace(/\/\/+/g,"/"):u;let i=s(),o=n.useMemo(()=>g([{path:e,element:null,children:null}],i,t,r),[e,i,t,r]);return n.useMemo(()=>{if(!o||!o[0])return null;let{pathname:e,params:n}=o[0];return{params:{...l,...n},pathname:[t,e].join("/").replace(/\/\/+/g,"/")}},[t,o,l])}export{$ as MemoryRouter,j as Navigate,w as Outlet,M as Redirect,b as Route,o as Router,T as Routes,c as createRoutesFromChildren,R as generatePath,g as matchRoutes,E as resolveLocation,W as useBlocker,L as useHref,s as useLocation,P as useMatch,p as useNavigate,h as useOutlet,k as useParams,f as useResolvedLocation,F as useRouteMatch,m as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
